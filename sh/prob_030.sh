#!/bin/sh

# 数の生成  ### 各桁を5乗した数の和が元の数と一致する数を調べるには、どの範囲の数を生成すればよいのか、分からない...
seq 1 9999999 \
| # 数を各桁毎に分割
sed -e 's/./& /g' \
| # 各桁の5乗した値と、元の数の生成
awk '{for(i=1; i<=NF; i++){ORS=""; print $i ^ 5 " "}; print gensub(/ /, "", "g") "\n"}' \
| # 各桁を5乗した数の和が元の数と一致する数の出力
awk 'NR == 1 {next} NF == 1 && $1^5 == $NF {print $NF; next} {tmp=0; for(i=1; i<=(NF-1); i++){tmp += $i}; if(tmp == $NF){print $NF}}' \
| # 該当数値の合計式の生成
tr '\n' '+' \
| # 末端の余分な演算子'+'の除去
sed -e 's/+$//' \
| # 各桁を5乗した数の和が元の数と一致する数の総和の出力
bc
